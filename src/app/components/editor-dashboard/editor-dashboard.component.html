<div class="app-layout">
  <app-editor-sidebar (sectionChange)="onSidebarSection($event)"></app-editor-sidebar>
 
  <div class="container">
    <div class="header-row">
      <div>
        <h1>üì∞ News Editor Dashboard</h1>
        <div class="subtitle">Manage and review news articles and advertisements</div>
      </div>
      <div class="header-actions">
        <button
          class="ai-btn-all"
          (click)="checkAllWithAI()"
          [disabled]="isValidatingAll">
          <span *ngIf="!isValidatingAll">ü§ñ Check All with AI</span>
          <span *ngIf="isValidatingAll">‚è≥ Validating All...</span>
        </button>
        <button class="logout-btn" (click)="logout()">üö™ Logout</button>
      </div>
    </div>
 
    <div class="summary-row">
      <app-card-summary
        *ngFor="let card of summaryCards"
        [label]="card.label"
        [value]="card.value"
        [note]="card.note"
        [change]="card.change">
      </app-card-summary>
    </div>
 
    <!-- News Submissions Section -->
    <ng-container *ngIf="selectedSection === 'news'">
      <app-article-list
        [articles]="articles"
        (validateArticle)="onValidateSingleArticle($event)"
        
        (approveArticle)="onApproveArticle($event)"
        (rejectArticle)="onRejectArticle($event)">
      </app-article-list>
    </ng-container>
 
    <!-- Ads Section -->
    <ng-container *ngIf="selectedSection === 'ads'">
      <app-ad-submission-list
  [ads]="ads"
  (checkAi)="checkAiValidation($event)">
</app-ad-submission-list>

    </ng-container>
 
    <!-- AI Insights Section -->
    <ng-container *ngIf="selectedSection === 'ai'">
      <app-ai-insights></app-ai-insights>
    </ng-container>



<div *ngIf="selectedSection === 'category'">
  <div class="category-box-row">
    <button
      *ngFor="let cat of categories"
      (click)="onSelectCategory(cat.value)"
      [class.active]="selectedCategory === cat.value"
      class="category-report-btn">
      <div class="report-icon"></div>
      <span class="report-label">{{ cat.label }}</span>
    </button>
  </div>
  <div *ngIf="selectedCategory">
    <div *ngIf="selectedCategoryNews.length === 0" class="category-news-loading">
      <div class="loading-spinner"></div>
      <p>Loading {{ getCategoryLabel(selectedCategory) }} news.....</p>
    </div>
    <div class="news-card-row">
      <div class="news-report-card" *ngFor="let news of selectedCategoryNews">
        <div class="media-wrapper">
         
          <img *ngIf="isImage(news.MediaFolder)" [src]="news.MediaFolder" alt="News image" width="280" height="170" (error)="onImageError($event)" />

          <video *ngIf="isVideo(news.MediaFolder)" [src]="news.MediaFolder" width="280" height="170" controls></video>
        </div>
        <div class="news-content">
          <h3>{{ news.Title }}</h3>
          <p class="summary">{{ news.Summary || news.Description }}</p>
          <div class="meta">
            <span>{{ news.Author }}</span>
            <span>{{ news.ApprovedDate | date:'short' }}</span>
            <span>{{ news.CategoryName }}</span>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="selectedCategoryNews.length === 0">
      <p>No news found for the selected category.</p>
    </div>
  </div>
</div>




    <ng-container *ngIf="selectedSection === 'reports'">
      <app-reports></app-reports>
    </ng-container>

    <!-- ‚úÖ ADDED: User Management Section -->
    <ng-container *ngIf="selectedSection === 'users'">
      <app-user-management></app-user-management>
    </ng-container>
    
  </div>
</div>
